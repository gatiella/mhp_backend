{% extends "rest_framework/base.html" %}
{% load rest_framework %}

{% block page_title %}{{ name|default:"API Endpoint" }}{% endblock %}
{% block page_description %}{{ description|default:"API Endpoint Documentation" }}{% endblock %}

{% block content %}
<div class="api-content">
    <div class="breadcrumb">
        <a href="/">üè† Home</a> /
        <a href="/api/">API Root</a> /
        <span>{{ name|default:"Current Page" }}</span>
    </div>
    
    <h2>{{ name|default:"API Endpoint" }}</h2>
    {% if description %}
        <p style="opacity: 0.8; margin-bottom: 1.5rem;">{{ description }}</p>
    {% endif %}
    
    {% if allowed_methods %}
    <div style="margin: 1rem 0;">
        {% for method in allowed_methods %}
            <span class="method-badge method-{{ method|lower }}">{{ method }}</span>
        {% endfor %}
    </div>
    {% endif %}

    <div class="endpoint-url">
        {{ request.build_absolute_uri }}
    </div>

    {% if response_headers %}
    <div class="form-section">
        <h3><i class="fas fa-info-circle"></i> Response Headers</h3>
        {% for key, value in response_headers.items %}
            <div><strong>{{ key }}:</strong> {{ value }}</div>
        {% endfor %}
    </div>
    {% endif %}

    {% if content %}
    <div class="form-section">
        <h3><i class="fas fa-code"></i> Response Data</h3>
        {% if status_code %}
            <div class="status-code status-{{ status_code }}">
                {{ status_code }} {% if status_text %}{{ status_text }}{% endif %}
            </div>
        {% endif %}
        <div class="json-response">{{ content|safe }}</div>
    </div>
    {% endif %}

    {% if display_edit_forms %}
    <div class="form-section">
        <h3><i class="fas fa-edit"></i> Try it out</h3>
        <div class="form-container">
            {% render_form serializer %}
        </div>
    </div>
    {% endif %}

    {% if paginator %}
    <div class="form-section">
        <h3><i class="fas fa-list"></i> Pagination</h3>
        <div class="pagination-info">
            {% if page_obj %}
                <p>Page {{ page_obj.number }} of {{ paginator.num_pages }}</p>
            {% endif %}
            <p>{{ paginator.count }} total items</p>
        </div>
    </div>
    {% endif %}

    {% if results %}
    <div class="form-section">
        <h3><i class="fas fa-database"></i> Results</h3>
        <div class="json-response">
            <pre>{{ results|safe }}</pre>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}